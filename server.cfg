# Sunny Roleplay
endpoint_add_tcp "0.0.0.0:30120"
endpoint_add_udp "0.0.0.0:30120"

set sv_enforceGameBuild 2944
sv_hostname "Sunny Roleplay"

# SRP ConVars (read by resources/sunnyrp/base/config.lua)
setr srp_api_url "http://127.0.0.1:3301"
setr srp_api_token "changeme_please"
setr srp_features "players,characters,inventory"
setr srp_primary_identifier "license"
setr srp_required_identifiers "license,discord"
setr srp_http_timeout_ms "5000"
setr srp_http_retries "3"

# --- Phase C ConVars ---
# character slots per user (0 = unlimited)
setr srp_max_characters "5"
# starting balances for new characters
setr srp_start_cash "500"
setr srp_start_bank "1500"
# routing buckets for spawn isolation (true/false)
setr srp_use_routing_buckets "true"

# --- Phase D ConVars ---
# Telemetry opt-in from server side (client will also check)
setr srp_map_telemetry "true"
# Client → server telemetry interval & movement threshold (meters)
setr srp_map_telemetry_interval_ms "1500"
setr srp_map_telemetry_min_move "0.7"

# --- Phase E: Custom Chat (no default chat) ---
# If you had the default chat, stop it:
# stop chat

# Chat toggles
setr srp_chat_enable "true"
setr srp_chat_ooc_enabled "true"
setr srp_chat_profanity_filter "true"

# Ranges (meters)
setr srp_chat_range_local "15.0"
setr srp_chat_range_me_do "15.0"

# Rate limits (milliseconds)
setr srp_chat_rate_ms_general "1500"
setr srp_chat_rate_ms_me_do "1000"
setr srp_chat_rate_ms_ooc "3000"
setr srp_chat_rate_ms_staff "1000"

# Staff scope (must match Phase B permissions)
setr srp_chat_staff_scope "staff.chat"

# --- Phase F: HUD ---
setr srp_hud_enabled "true"
setr srp_hud_update_interval_ms "750"             # client → NUI coalesced flush
setr srp_hud_status_tick_seconds "60"             # server → backend status delta cadence
setr srp_hud_accounts_refresh_ms "10000"          # server refresh balances/job/duty occasionally

# Visibility defaults (can be toggled at runtime via events)
setr srp_hud_show_vitals "true"                   # health/armor
setr srp_hud_show_status "true"                   # hunger/thirst/stress/temp/wet/drug/alcohol
setr srp_hud_show_identity "true"                 # cash/bank/job/duty
setr srp_hud_show_voice "true"                    # voice mode & talking

# --- Phase G: Inventory ---
setr srp_inv_hotbar_slots "5"                # 1..5
setr srp_inv_drop_ttl_seconds "300"          # ground drop lifetime
setr srp_inv_oos_retry_ms "200"              # retry when idempotent collision happens
setr srp_inv_max_stack "250"                 # default max if item.max_stack is null
setr srp_inv_feature_weapons "true"          # allow weapon items
setr srp_inv_ground_radius "2.5"             # pickup distance

# --- Phase H: Economy ---
setr srp_pay_period "weekly"            # weekly | biweekly
setr srp_ca_min_wage "16.50"            # USD/hr (base); cities can override per job config
setr srp_ff_min_wage "20.00"            # fast-food (AB 1228)
setr srp_sales_tax_base "0.0725"        # 7.25% statewide base
setr srp_sales_tax_district "0.0125"    # example +1.25% (city/county). Set 0.0 if you don’t want extra.
setr srp_casdi_rate "0.012"             # 1.2% SDI
setr srp_economy_sync_ms "45000"        # HUD/refresh cadence

# --- Phase I: Vehicles ---
setr srp_veh_stream_radius "150.0"             # spawn vehicles for players within this radius (meters)
setr srp_veh_despawn_radius "260.0"            # despawn when no players within this radius
setr srp_veh_sync_interval_ms "30000"          # server saves world pos/condition every 30s
setr srp_veh_plate_prefix "SRP"                # autogenerated plates (prefix + unique)
setr srp_veh_allow_title_transfer "true"
setr srp_veh_impound_yard "JUNK01"             # default junk/impound id

# (Example fuel hook toggle; your fuel script can set/override this)
setr srp_fuel_hook_enabled "false"

# --- Phase K: Admin Toolkit ---
setr srp_admin_cooldown_ms "1500"
setr srp_admin_presence_heartbeat_ms "20000"

# --- Phase L: LEO/EMS/DOJ Foundations ---
setr srp_dispatch_blip_time_ms "120000"     # how long map pings stay for units
setr srp_dispatch_rate_limit_ms "2000"      # anti-spam for /911 /311

# --- Phase M: Properties & Housing ---
setr srp_prop_interaction_dist "2.2"
setr srp_prop_bucket_base "60000"          # routing buckets start
setr srp_prop_debug_blips "false"

# --- Phase N: Businesses & Shops ---
setr srp_shop_tax_rate "8.5"              # default sales tax %, unless overridden by business
setr srp_shop_rate_limit_ms "1200"

# --- Phase O: Crime Systems ---
setr srp_crime_register_cooldown_s "420"     # 7 minutes per register by default
setr srp_crime_lockpick_base_ms  "4500"      # client placeholder timing
setr srp_crime_heat_decay_tick_s "300"       # every 5m some heat decay can be applied by server

# --- Phase P: Phone & Apps ---
setr srp_phone_area_default "415"          # default area code if none chosen
setr srp_phone_sms_rate_ms "1200"          # rate limit SMS sends per player
setr srp_phone_push_poll_ms "15000"        # fallback poll for unread messages
setr srp_phone_ads_enabled "true"

# Phase Q — Voice
# Native Mumble tuning (works with or without pma-voice)
setr srp_voice_mode_whisper "3.0"
setr srp_voice_mode_normal  "10.0"
setr srp_voice_mode_shout   "25.0"
setr srp_voice_radio_ptt_key "249"   # default N key
setr srp_voice_radio_default_vol "60"  # percent
setr srp_voice_phone_default_vol "70"  # percent

# If you use pma-voice, recommended convars (optional but nice):
# setr voice_use3dAudio true
# setr voice_useSendingRangeOnly true
# setr voice_enableRadioSubmix true
# setr voice_enablePhones true

# Phase R — Telemetry & Anticheat
# Client sampling and server detectors
setr srp_tel_sample_ms "750"
setr srp_tel_tp_threshold_m "180.0"        # teleport distance threshold per sample
setr srp_tel_speed_foot_mps "12.0"         # ~27 mph on foot cap
setr srp_tel_speed_vehicle_mps "120.0"     # ~268 mph (safety)
setr srp_tel_alert_repeat_s "30"           # suppress duplicate staff alerts within 30s
setr srp_tel_post_rate_ms "500"            # min ms between HTTP posts per source

# Optional gating
setr srp_whitelist_enabled "false"
setr srp_require_verification "false"
setr srp_required_identifiers "license,discord,steam,xbl,live,ip"  # comma-separated list of required identifiers
setr srp_primary_identifier "license"
setr srp_deferrals_debug "false"

# Backend replay guard (also see .env)
# The FiveM SRP.Fetch already sends X-Nonce, X-Ts, X-Sig. This phase enforces them on backend.

# Logging level for base resource
setr srp_log_level "info"

# Ensure our base resource only (no default FiveM resources)  ( Follow the arrows ↙ ← ↖ ↑ ↗ → ↘ ↓ )
# Order: base → identity → characters → spawn → map → chat → hud → inventory → economy → vehicles → jobs → admin → leoems → properties → shops → crime → phone → voice ↙
# ↓ ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ← ←
# telemetry  → 
ensure sunnyrp-base